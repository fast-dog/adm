<p style="text-align: center" align="center">
<img src="/assets/images/logo-fastdog-icon.png" alt="fast-dog-logo">
</p>

# Интерфейс администрирования для Laravel

[![Build Status](https://travis-ci.com/fast-dog/adm.svg?branch=master)](https://travis-ci.com/fast-dog/adm)
[![codecov](https://codecov.io/gh/fast-dog/adm/branch/master/graph/badge.svg?token=JRMM3HE1JW)](https://codecov.io/gh/fast-dog/adm)


## Концепция
Пакет предлагает автоматизацию типовых действий **CRUD**, а так же конфигурирование меню навигации и
настройку форм.

В качестве основного источника данных выступают **Ресурсы**,
для определения форм редактирования моделей используются **Формы**. Ресурсы загружаются автоматически из директории
`app/Resources/[TargetName]`, в процессе инициализации определяются поля таблицы БД по которым будет выстроен UI таблиц и форм.
В качестве названия полей будут использованы комментарии к колонкам таблицы или статичные подписи определенные в Ресурсе.

После завершения определения параметров ресурс добавляется в сервис контейнер Laravel и доступен к вызову по псевдониму
`[TargetName]Resource`, так же создается подраздел в меню раздела навигации Администрирование.

Сборка UI производится автоматически, для управления таблицами и формами используются методы определенные для полей ресурсов.

Для отображения UI интерфейса администрирования используется пакет [dg482/green](https://github.com/dg482/green),
основанный на [vueComponent/ant-design-vue-pro](https://github.com/vueComponent/ant-design-vue-pro).



## Установка

Добавить поставщика услуг (service provider) в `config/app.php`

``` php
   'providers' => [
    ...
    \FastDog\Adm\AdmServiceProvider::class
    ...
    ]
```

Выполнить консольную команду:

``` shell
   php artisan vendor:publish --provider="FastDog\Adm\AdmServiceProvider"
```

Выполнить миграции:

``` shell
   php artisan migrate
```


## Использование



##### Расширение функционала

Добавление функциональных возможностей достигается за счет [системы событий Laravel](https://laravel.com/docs/8.x/events). 

Ниже приведен список основных событий для построения интерфейса администрирования и выполнения дополнительных действий.

##### Основное меню навигации

* **BeforeGetFrontendMenu** - Вызывается перед формированием основного меню. Используется для модификации основного меню.
* **BeforeCreateAdministrationMenu** - Вызывается перед созданием меню раздела Администрирование.
Используется для добавления подразделов в начало меню раздела Администрирование.
* **AfterCreateAdministrationMenuItem** - Вызывается перед созданием меню раздела Администрирование.
Используется для добавления подразделов в конец меню раздела Администрирование.
* **AfterCreateFrontendMenu** - Вызывается после формированием основного меню. 
Используется для добавления новых разделов после раздела Администрирование. 